{% extends "base.html" %}
{% block title %}Search Rooms{% endblock %}

{% block content %}

<!-- Header -->
<div class="mb-10">
    <h1 class="text-4xl font-bold">Find rooms</h1>
    <p class="text-gray-500 mt-2">
        Verified rooms from trusted owners
    </p>
</div>

<!-- Search -->
<form method="get" class="mb-12">
    <div class="relative max-w-xl">
        <input
            type="text"
            name="q"
            value="{{ query }}"
            placeholder="Search city or area (Pokhara, Lakeside...)"
            class="w-full pl-12 pr-4 py-4 rounded-full border shadow-sm focus:ring-2 focus:ring-slate-900 outline-none"
        >
        <span class="absolute left-4 top-4 text-gray-400 text-xl">üîç</span>
    </div>
</form>

<!-- Listings -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

{% for listing in listings %}
<div class="bg-white rounded-2xl shadow hover:shadow-xl transition overflow-hidden">

    {% with listing.photos.first as photo %}
        {% if photo %}
            <img src="{{ photo.image.url }}" class="h-56 w-full object-cover">
        {% else %}
            <div class="h-56 bg-gray-200 flex items-center justify-center text-gray-400">
                No Image
            </div>
        {% endif %}
    {% endwith %}

    <div class="p-5">
        <h3 class="text-lg font-semibold">
            {{ listing.title }}
        </h3>

        <p class="text-sm text-gray-500">
            üìç {{ listing.city }}{% if listing.area %}, {{ listing.area }}{% endif %}
        </p>

        <p class="text-xl font-bold mt-2">
            Rs. {{ listing.monthly_rent }}
        </p>

        <div class="mt-4 flex justify-between items-center">
            <a href="{% url 'buyer_listing_detail' listing.id %}"
               class="font-semibold hover:underline">
                View ‚Üí
            </a>

            <a href="{% url 'save_listing' listing.id %}"
               class="text-xl hover:text-red-500">
                ‚ù§Ô∏è
            </a>
        </div>
    </div>
</div>
{% endfor %}

</div>

{% endblock %}
