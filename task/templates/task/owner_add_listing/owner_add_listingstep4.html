{% extends 'base.html' %}

{% block content %}


<!-- Preview Card -->
<div class="border rounded-2xl p-6 bg-gray-50 mb-6">

    <h2 class="text-lg font-semibold text-gray-800 mb-4">
        üëÅ Listing Preview
    </h2>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

        <!-- Photos -->
        <div>
            <div class="grid grid-cols-2 gap-3 mb-4">
                {% for photo in photos %}
                    <img
                        src="{{ photo.image.url }}"
                        class="w-full h-40 object-cover rounded-lg"
                    >
                {% empty %}
                    <div class="bg-gray-200 rounded-xl h-40 flex items-center justify-center text-gray-500">
                        No photos uploaded
                    </div>
                {% endfor %}
            </div>

            {% if proof_photo %}
            <div>
                <p class="text-sm font-semibold text-gray-700 mb-2">
                    üìù Proof Photo
                </p>
                <img
                    src="{{ proof_photo.image.url }}"
                    class="w-40 h-40 object-cover rounded-lg border"
                >
            </div>
            {% endif %}
        </div>

        <!-- Info -->
        <div class="space-y-2 text-sm text-gray-700">

            <p><strong>Title:</strong> {{ listing.title }}</p>
            <p><strong>Room Type:</strong> {{ listing.get_room_type_display }}</p>
            <p><strong>Location:</strong> {{ listing.city }} ¬∑ {{ listing.area }}</p>

            <hr class="my-3">

            <p><strong>Rent:</strong> NPR {{ listing.monthly_rent }}</p>
            <p><strong>Deposit:</strong> NPR {{ listing.security_deposit }}</p>

            <hr class="my-3">

            <p><strong>Bedrooms:</strong> {{ listing.bedrooms }}</p>
            <p><strong>Bathrooms:</strong> {{ listing.bathrooms }}</p>
            <p><strong>Floor:</strong> {{ listing.floor_number }}</p>
            <p><strong>Total Area:</strong> {{ listing.total_area }} sq.ft</p>
            <p><strong>Balcony:</strong> 
                {% if listing.has_balcony %} Yes {% else %} No {% endif %}
            </p>
            <p><strong>Kitchen:</strong> {{ listing.get_kitchen_type_display }}</p>

            <hr class="my-3">

            <p><strong>Facilities:</strong></p>
            <ul class="list-disc ml-5 space-y-1">
                {% if listing.is_furnished %}<li>Furnished</li>{% endif %}
                {% if listing.wifi_available %}<li>Wi-Fi</li>{% endif %}
                {% if listing.parking_available %}<li>Parking</li>{% endif %}
                {% if listing.utilities_included %}<li>Utilities Included</li>{% endif %}
                {% if listing.ac_available %}<li>Air Conditioning</li>{% endif %}
                {% if listing.water_24hrs %}<li>24/7 Water Supply</li>{% endif %}
                {% if listing.lift_available %}<li>Lift / Elevator</li>{% endif %}
                {% if listing.pet_allowed %}<li>Pet Allowed</li>{% endif %}
            </ul>

        </div>

    </div>
</div>

        <!-- Verification Info -->
        <div class="border border-indigo-200 bg-indigo-50 rounded-xl p-4 mb-6">
            <h3 class="font-semibold text-indigo-700 mb-1">
                üîç Verification Process
            </h3>
            <p class="text-sm text-indigo-700">
                After submission, your listing will be reviewed by our team.
                Once verified, it will become visible to renters.
            </p>
        </div>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row gap-4 justify-between border-t pt-6">

            <!-- Back -->
            <a href="{% url 'owner_add_listingstep3' %}"
               class="text-sm text-gray-600 hover:text-gray-900">
                ‚Üê Back
            </a>

            <!-- FORM ACTIONS -->
            <form method="post"
                  action="{% url 'owner_add_listingstep4' %}"
                  class="flex gap-3">
                {% csrf_token %}

                <button
                    type="submit"
                    name="action"
                    value="draft"
                    class="px-5 py-3 rounded-xl border border-gray-300
                           text-gray-700 font-medium
                           hover:bg-gray-100 transition">
                    Save as Draft
                </button>

                <button
                    type="submit"
                    name="action"
                    value="submit"
                    class="px-6 py-3 rounded-xl bg-indigo-600
                           text-white font-semibold
                           hover:bg-indigo-700 transition">
                    Submit for Verification
                </button>
            </form>

        </div>

        <p class="text-xs text-gray-500 text-center mt-6">
            You can edit your listing anytime from the owner dashboard.
        </p>

    </div>

</div>

</body>
{% endblock %}
